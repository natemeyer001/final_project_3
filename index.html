<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify Top 200</title>
    <link
        rel="stylesheet" 
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" 
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" 
        crossorigin="anonymous"
    />
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body class="bg-light" id="page-top">
    <div class="wrapper">
        <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand" href="#page-top">Spotify Top 200 Charts</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <div class="navbar-nav">
                  <a class="nav-item nav-link" href="#data">Data</a>
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Machine Learning
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    <a class="dropdown-item" href="#ml">Heatmap</a>
                    <a class="dropdown-item" href="#lr">Linear Regression</a>
                    <a class="dropdown-item" href="#rfr">Random Forest Regression</a>
                  </div>
                  <a class="nav-item nav-link" href="#viz">Visualizations</a>
                  <a class="nav-item nav-link" href="#outro">Final Thoughts</a>
                  <a class="nav-item nav-link" href="#about">About Us</a>
                </div>
            </div>
        </nav>
    </div>
    <div class="jumbotron shadow">
        <h1 class="display-4"></h1>
    </div>
    <section class="data-section bg-light text-center" id="data">
        <div class="container-fluid">
            <div class="row gy-5">
                <div class="col-md-12 text-center">
                    <h3>Spotify Dataset</h3>
                </div>
                <div class="col-md-12">
                <p>The data contains a list of the songs that have reached the Spotify Top 200 Weekly (Global) Chart in 2020 and 2021. Included in the data are metrics regarding how popular, danceable, loud, etc the songs are as well as the artist and genre. We cleaned the data to remove songs with blanks and summarized the genres into a single general category. Once completed we ended up with 9 categories for the 1,470 songs in our cleaned DataFrame.
                </p>
                <p>With this data, we want to see if a songâ€™s metrics (popularity, danceability, etc) can predict the number of times the song charted or the number of streams.
                </p>
            </div>
            </div>
        </div>
    </section>
    <section class="ml-section bg-light" id="ml">
        <div class="container-fluid">
            <div class="row gy-5">
                <div class="col-md-12 text-center">
                    <h3>Machine Learning</h3>
                    <img src="./images/CorrelationHeatMapPopFilterGnBu.jpeg" class="img-fluid shadow" alt="...">
                </div>
            </div>
            <div class="row gy-5" id="lr">
                <div class="col-md-12">
                    <h4>Linear Regression</h4>
                    <p>Our first idea was to try and predict how many times a song charted based on Spotify metrics of songs, so we started looking for simple linear relationships between the number times charted, and each individual feature. As shown in the image "Number of Times Charted" graphs, there was not a clear linear relationship between any of the variables from the plots. So we decided that predicting streams might yield better results and started by checking their scatter plots. As the "Streams" plots show, none of the plots looked particularly promising. That was supported by the correlation heatmap of all variables, above. The highest positive correlation for Streams (besides itself) was Popularity, which had a r^2 of 0.14 that is in the middle of "None or very weak". The highest negative correlation for Streams was Highest Charting Position, with a r^2 of -0.3 that is on the edge of "very weak" and "weak".
                    </p>
                    <p>At this point we determined that a different type of model was needed.
                    </p>
                </div>
            </div>
            <div class="row gy-5">
                <div class="col-md-6 text-center">
                    <p><b>Number of Times Charted</b></p>
                    <img src="./images/NumCharted10AxPlot.jpeg" class="img-fluid shadow" alt="NumCharted10AxPlot">
                </div>
                <div class="col-md-6 text-center">
                    <p><b>Streams</b></p>
                    <img src="./images/Streams10AxPlot.jpeg" class="img-fluid shadow" alt="StreamsPlot">
                </div>
            </div>
            <div class="row gy-5" id="rfr">
                <div class="col-md-8">
                    <h4>Random Forest Regression</h4>
                    <p>Linear Regression models did not show any linear relationship between Streams and the Feature dataset. Random Forest Regression uses decision trees, averaging the sample data to improve predictive accuracy and control over-fitting. Our data was split into training and testing samples at a 75% and 25% split. The data was also cleaned by dropping more unnecessary columns and encoding the Genre category using LabelEncoder to change the values from Categories to integers. After the data was pre-processed, we ran the Random Forest Regression model using SciKit-Learn RandomForestRegressor. The number of trees in the forest (n_estimators) was set to 50. The model was also tested at 100 and 150 trees, but did not improve performance. This model showed our strongest accuracy with an R2 score of .83. This indicated that the model fit well with a score very close to 1.0. Our output also showed a strong similarity for Actual Streams and Predicted Streams. Therefore, we determined we could use this model to predict the number of Streams based on the data features.
                    </p>
                </div>
                <div class="col-md-4">
                    <div class="container d-flex h-100">
                        <div class="row justify-content-center align-self-center">
                            <h6><b>Random Forest Regression Output</b></h6>
                            <img src="./images/random_forest_output.png" class="img-fluid shadow" alt="...">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="viz-section bg-light text-center" id="viz">
        <div class="container-fluid">
            <div class="row">
            <div class="col-md-12 gy-5">
                <h3>Data Visualizations</h3>
                <div class='tableauPlaceholder shadow' id='viz1638651311539' style='position: relative'>
                    <noscript>
                    <a href='#'>
                        <img alt='Spotify Top 200 Chart ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Sp&#47;SpotifyTop200Charts_16386325306100&#47;Top200Songs&#47;1_rss.png' style='border: none' />
                    </a>
                    </noscript>
                    <object class='tableauViz'  style='display:none;'>
                        <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> 
                        <param name='embed_code_version' value='3' /> 
                        <param name='site_root' value='' />
                        <param name='name' value='SpotifyTop200Charts_16386325306100&#47;Top200Songs' />
                        <param name='tabs' value='no' />
                        <param name='toolbar' value='yes' />
                        <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Sp&#47;SpotifyTop200Charts_16386325306100&#47;Top200Songs&#47;1.png' /> 
                        <param name='animate_transition' value='yes' />
                        <param name='display_static_image' value='yes' />
                        <param name='display_spinner' value='yes' />
                        <param name='display_overlay' value='yes' />
                        <param name='display_count' value='yes' />
                        <param name='language' value='en-US' />
                        <param name='filter' value='publish=yes' />
                    </object>
                </div>                
                <script type='text/javascript'>                    
                    var divElement = document.getElementById('viz1638651311539');                    
                    var vizElement = divElement.getElementsByTagName('object')[0];                    
                        vizElement.style.width='100%';
                        vizElement.style.height=(divElement.offsetWidth*0.75)+'px';                    
                    var scriptElement = document.createElement('script');                    
                        scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    
                        vizElement.parentNode.insertBefore(scriptElement, vizElement);                
                </script>
            </div>
            </div>
        </div>
    </section>
    <section class="outro-section bg-light text-center" id="outro">
        <div class="container-fluid">
            <div class="row gy-5">
                <div class="col-md-12 text-center">
                    <h3>Final Thoughts</h3>
                </div>
                <div class="col-md-12">
                <p>Our best model was able to explain over 80% of the variability in the data, which vastly outperformed the Linear Regression, but still has some room to improve. One way to improve it would be to look closer at outliers (possibly remove songs with over 3M streams) and their impact on the model. Another way is to use more advanced machine learning techniques that were outside the scope of the course. An example is hyperparameter tuning.
                </p>
                <p>It's worth noting that the data we used was from 4 months, and some of the values could have changed. We decided that since the Spotify metrics of a song didn't change over time (the tempo is the tempo, etc) that our data was valid to analyze. The number of streams, artist followers, and number times charted have all likely changed over the past 4 months, but still represent an accurate picture.
                </p>
            </div>
            </div>
        </div>
    </section>
    <section class="about-section bg-custom-2 text-black" id="about">
        <div class="container-fluid">
            <div class="row ">
                <div class="col-md-12 text-center text-white">
                    <h3>About Us</h3>
                </div>
                <div class="col-md-3 text-center"><br>
                <div class="card bg-custom-1 mx-auto" style="max-width: 18rem;">
                    <div class="card-body">
                      <h5 class="card-title">Kathy Bauman</h5>
                      <p class="card-text"><a href="https://github.com/ckbauman">GitHub</a></p>
                    </div>
                  </div>
                </div>
                 <div class="col-md-3 text-center"><br>
                <div class="card bg-custom-1 mx-auto" style="max-width: 18rem;">
                    <div class="card-body">
                      <h5 class="card-title">Urte Melyte</h5>
                      <p class="card-text"><a href="https://github.com/UrteMelyte">GitHub</a></p>
                    </div>
                  </div>
                </div>  
                <div class="col-md-3 text-center"><br>
                <div class="card bg-custom-1 mx-auto" style="max-width: 18rem;">
                    <div class="card-body">
                      <h5 class="card-title">Nate Meyer</h5>
                      <p class="card-text"><a href="https://github.com/natemeyer001">GitHub</a></p>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 text-center"><br>
                <div class="card bg-custom-1 mx-auto" style="max-width: 18rem;">
                    <div class="card-body">
                      <h5 class="card-title">Sunisa Pradhan</h5>
                      <p class="card-text"><a href="https://github.com/sprad1">GitHub</a></p>
                    </div>
                  </div>
                </div>           
            </div><br> 
            <div class="row ">
                <div class="col-md-12 text-center text-white">
                    <p>Webpage built with <b>Bootstrap 4</b></p>
                    <p>Spotify Top 200 Charted Song data obtained from <a href="https://www.kaggle.com/sashankpillai/spotify-top-200-charts-20202021" class="text-white"><b>Kaggle</b></a></p>
                </div>
            </div> 
        </div>        
    </section>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>